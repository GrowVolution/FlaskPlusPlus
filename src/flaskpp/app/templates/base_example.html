<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" href="{{ url_for('fpp_default.static', filename='img/favicon.png') }}" type="image/png">

    <link rel="stylesheet"
          href="{{ url_for('fpp_default.static', filename='css/tailwind.css') }}">

    <title>{% block title %}Flask++ App{% endblock %}</title>

    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"
            integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+"
            crossorigin="anonymous">
    </script>
    <script id="fppSocketScript"
            src="{{ url_for('fpp_default.static', filename='js/socket.js') }}" type="module"
            data-socket-domain="{{ request.scheme.replace('http', 'ws') }}://{{ request.host }}">
    </script>

    <script src="{{ url_for('fpp_default.static', filename='js/base.js') }}" type="module"></script>

    <style>
        .flash {
            animation: fadeIn 0.2s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-5px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>

    {% block head %}{% endblock %}
</head>

<body class="bg-primary-light min-h-screen flex flex-col">
    <header>
        <nav class="w-full flex items-center px-3 shadow-sm bg-primary text-light">
            <div class="w-full flex items-center justify-between">
                <a class="text-light text-xl font-semibold" href="/">
                    {{ _('My new Flask-App') }}
                </a>

                <button class="lg:hidden p-2 rounded border border-light" type="button"
                        data-collapse-toggle="navbarCollapse" aria-controls="navbarCollapse"
                        aria-expanded="false" aria-label="Toggle navigation">
                    <span class="block w-5 h-0.5 bg-light mb-1"></span>
                    <span class="block w-5 h-0.5 bg-light mb-1"></span>
                    <span class="block w-5 h-0.5 bg-light"></span>
                </button>

                <div id="navbarCollapse"
                     class="hidden lg:flex lg:items-center lg:gap-2 lg:ms-3 flex-col lg:flex-row">
                    {% for label, href in NAV.items() %}
                        {% include "nav_link.html" with context %}
                    {% endfor %}
                </div>
            </div>
        </nav>

        {% include "flashing.html" %}
    </header>

    <main id="main" class="flex-grow">
        {% block content %}{% endblock %}
    </main>

    <footer class="text-center py-3 text-light text-sm bg-primary">
        &copy; {{ current_year|default(2025) }}
    </footer>

    {% include "modals/confirm_modal.html" %}
    {% include "modals/info_modal.html" %}

    {% block scripts %}{% endblock %}
</body>
</html>
